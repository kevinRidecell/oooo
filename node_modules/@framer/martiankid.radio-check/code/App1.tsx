import { Data, animate, Override, Animatable } from "framer"
import {findDOMNode} from "react-dom"

const data = Data({
    selectedItems:[],
})

let text = ""
let topOffset = 156
let offset = topOffset
let textHeight = 48

export const HandleChange_: Override = () => {
    return {
        onChange(selectedItems) {
            data.selectedItems = [...selectedItems],
            text = data.selectedItems.reduce((all, current) => all + current.name + ', ' , "")
            topOffset = text == "" ? 156 : 204
            offset = topOffset - textHeight
        },
    }
}

export const UpdateLabel_: Override = (height) => {
    let getLabel = node => {
        let label = findDOMNode(node)
        if (label !== null) {
            textHeight = label.children[0].getBoundingClientRect().height
            console.log(offset)
        }  
    }
    return {
        text: text,
        top: offset,
        ref: getLabel
    }
}